<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Authentication Successful</title>
    <style>
      /* Reset and base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
      }

      /* Animated background particles */
      body::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: radial-gradient(
            circle at 20% 50%,
            rgba(255, 255, 255, 0.1) 1px,
            transparent 1px
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(255, 255, 255, 0.1) 1px,
            transparent 1px
          ),
          radial-gradient(
            circle at 40% 80%,
            rgba(255, 255, 255, 0.1) 1px,
            transparent 1px
          );
        background-size: 300px 300px, 200px 200px, 250px 250px;
        animation: float 20s ease-in-out infinite;
        pointer-events: none;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) translateX(0px);
        }
        25% {
          transform: translateY(-20px) translateX(10px);
        }
        50% {
          transform: translateY(-10px) translateX(-5px);
        }
        75% {
          transform: translateY(-15px) translateX(8px);
        }
      }

      /* Main container */
      .container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 24px;
        padding: 3rem 2.5rem;
        text-align: center;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15),
          0 0 0 1px rgba(255, 255, 255, 0.3);
        max-width: 400px;
        width: 90%;
        position: relative;
        animation: slideIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        transform-origin: center;
      }

      @keyframes slideIn {
        0% {
          opacity: 0;
          transform: scale(0.8) translateY(30px);
        }
        100% {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      /* Success icon container */
      .success-icon {
        margin-bottom: 2rem;
        position: relative;
        display: inline-block;
      }

      /* --- REFINED CHECKMARK SVG --- */
      .checkmark {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: block;
        stroke-width: 4; /* Made the circle stroke slightly thicker */
        stroke: #4caf50;
        stroke-miterlimit: 10;
        box-shadow: inset 0px 0px 0px #4caf50;
        /* Adjusted animation timing for a smoother sequence */
        animation: fill 0.4s ease-in-out 0.4s forwards,
          scale 0.3s ease-in-out 0.9s both;
        position: relative;
      }

      .checkmark__circle {
        stroke-dasharray: 166;
        stroke-dashoffset: 166;
        stroke-width: 4; /* Matched the circle stroke width */
        stroke-miterlimit: 10;
        stroke: #4caf50;
        fill: rgba(76, 175, 80, 0.1);
        /* Smoother easing and slightly longer duration for the circle draw */
        animation: stroke 0.8s cubic-bezier(0.65, 0, 0.45, 1) forwards;
      }

      .checkmark__check {
        transform-origin: 50% 50%;
        stroke-dasharray: 48;
        stroke-dashoffset: 48;
        stroke: #4caf50;
        stroke-width: 5; /* Made the check itself thicker for emphasis */
        stroke-linecap: round;
        stroke-linejoin: round;
        fill: none;
        /* The check now draws a little faster and with more 'snap' */
        animation: stroke-check 0.35s cubic-bezier(0.65, 0, 0.45, 1) 0.8s
          forwards;
      }
      /* --- END OF REFINEMENTS --- */

      @keyframes stroke {
        100% {
          stroke-dashoffset: 0;
        }
      }

      @keyframes stroke-check {
        100% {
          stroke-dashoffset: 0;
        }
      }

      @keyframes scale {
        0%,
        100% {
          transform: none;
        }
        50% {
          /* A slightly more subtle bounce */
          transform: scale3d(1.05, 1.05, 1);
        }
      }

      @keyframes fill {
        100% {
          /* Fills the entire circle for a more solid look */
          box-shadow: inset 0px 0px 0px 40px #4caf50;
        }
      }

      /* Success icon glow effect */
      .success-icon::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100px;
        height: 100px;
        background: radial-gradient(
          circle,
          rgba(76, 175, 80, 0.3) 0%,
          transparent 70%
        );
        border-radius: 50%;
        transform: translate(-50%, -50%);
        animation: pulse 2s ease-in-out infinite;
        z-index: -1;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 0.8;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.2);
          opacity: 0.4;
        }
      }

      /* Typography */
      h1 {
        color: #2c3e50;
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 1rem;
        letter-spacing: -0.5px;
        animation: fadeInUp 0.6s ease-out 0.3s both;
      }

      .subtitle {
        color: #64748b;
        font-size: 1.1rem;
        font-weight: 400;
        margin-bottom: 2rem;
        line-height: 1.5;
        animation: fadeInUp 0.6s ease-out 0.5s both;
      }

      /* Status message */
      .status-message {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        color: #64748b;
        font-size: 0.9rem;
        font-weight: 500;
        opacity: 0;
        animation: fadeInUp 0.6s ease-out 1.2s both;
      }

      /* Spinner animation */
      .spinner {
        width: 16px;
        height: 16px;
        border: 2px solid #e5e7eb;
        border-top: 2px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Fade in up animation */
      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Responsive design */
      @media (max-width: 480px) {
        .container {
          padding: 2rem 1.5rem;
          margin: 1rem;
        }

        h1 {
          font-size: 1.75rem;
        }

        .checkmark {
          width: 70px;
          height: 70px;
        }

        .success-icon::after {
          width: 90px;
          height: 90px;
        }
      }

      /* Reduced motion accessibility */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }

        body::before {
          animation: none;
        }

        .success-icon::after {
          animation: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="success-icon">
        <svg
          class="checkmark"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 52 52"
        >
          <circle class="checkmark__circle" cx="26" cy="26" r="25" />
          <path class="checkmark__check" d="m14.1,27.2l7.1,7.2 16.7-16.8" />
        </svg>
      </div>
      <h1>Authentication Successful!</h1>
      <p class="subtitle">You can now close this tab.</p>
      <div class="status-message">
        <div class="spinner"></div>
        <span>Closing tab...</span>
      </div>
    </div>

    <script>
      // When this page loads, it sets a value in the extension's storage
      // to indicate that the user is now logged in.
      if (typeof chrome !== "undefined" && chrome.storage) {
        chrome.storage.local.set({ isLoggedIn: true }, () => {
          console.log("Login status saved.");
          // The page will close itself after a few seconds.
          setTimeout(() => {
            window.close();
          }, 1000);
        });
      } else {
        console.log(
          "Chrome extension API not available - running in standalone mode"
        );
        setTimeout(() => {
          console.log("Would close tab in extension environment");
        }, 1000);
      }
    </script>
  </body>
</html> -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Authentication Successful</title>
    <meta name="description" content="Authentication completed successfully" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-blue: #0066cc;
        --success-green: #16a34a;
        --text-primary: #111827;
        --text-secondary: #6b7280;
        --border-color: #e5e7eb;
        --background-gray: #f9fafb;
        --white: #ffffff;
        --success-bg: #f0fdf4;
        --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background-color: var(--background-gray);
        color: var(--text-primary);
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .auth-container {
        background: var(--white);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        box-shadow: var(--shadow);
        padding: 3rem 2.5rem;
        text-align: center;
        max-width: 420px;
        width: 100%;
        position: relative;
      }

      .success-icon {
        width: 72px;
        height: 72px;
        background: var(--success-bg);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 2rem;
        border: 1px solid #dcfce7;
      }

      .checkmark {
        width: 32px;
        height: 32px;
        stroke: var(--success-green);
        stroke-width: 2.5;
        fill: none;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .auth-title {
        font-size: 28px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.75rem;
        letter-spacing: -0.025em;
      }

      .auth-description {
        color: var(--text-secondary);
        font-size: 16px;
        margin-bottom: 2.5rem;
        line-height: 1.5;
      }

      .secure-indicator {
        position: absolute;
        top: 1rem;
        right: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-secondary);
        font-size: 12px;
        font-weight: 500;
        background: #f8fafc;
        padding: 0.375rem 0.75rem;
        border-radius: 6px;
        border: 1px solid var(--border-color);
      }

      .secure-icon {
        width: 14px;
        height: 14px;
        fill: var(--success-green);
      }

      /* Responsive Design */
      @media (max-width: 480px) {
        body {
          padding: 1rem;
        }

        .auth-container {
          padding: 2rem 1.5rem;
        }

        .auth-title {
          font-size: 24px;
        }

        .success-icon {
          width: 64px;
          height: 64px;
        }

        .checkmark {
          width: 28px;
          height: 28px;
        }

        .secure-indicator {
          position: static;
          margin-bottom: 1.5rem;
          justify-content: center;
        }
      }

      /* Accessibility & Motion */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      @media (prefers-contrast: high) {
        :root {
          --border-color: #000000;
          --text-secondary: #000000;
        }

        .auth-container {
          border-width: 2px;
        }
      }

      /* Focus management */
      .auth-container:focus {
        outline: 2px solid var(--primary-blue);
        outline-offset: 2px;
      }
    </style>
  </head>
  <body>
    <div
      class="auth-container"
      tabindex="-1"
      role="main"
      aria-labelledby="auth-title"
    >
      <div class="secure-indicator">
        <svg class="secure-icon" viewBox="0 0 20 20" fill="currentColor">
          <path
            fill-rule="evenodd"
            d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
            clip-rule="evenodd"
          />
        </svg>
        Secure
      </div>

      <div class="success-icon" aria-hidden="true">
        <svg class="checkmark" viewBox="0 0 24 24">
          <path d="M20 6L9 17l-5-5"></path>
        </svg>
      </div>

      <h1 id="auth-title" class="auth-title">Authentication Successful</h1>
      <p class="auth-description">
        You have been successfully authenticated and can close this tab to
        continue using the application.
      </p>
    </div>

    <script>
      (function () {
        "use strict";

        // Configuration constants
        const CONFIG = {
          STORAGE_KEY: "user_auth_state",
          SESSION_TIMEOUT: 24 * 60 * 60 * 1000, // 24 hours
          APP_VERSION: "3.0.1",
        };

        // Enhanced logging system
        const Logger = {
          _log: function (level, message, data) {
            const timestamp = new Date().toISOString();
            const logData = {
              timestamp,
              level,
              message,
              data: data || null,
              userAgent: navigator.userAgent,
              url: window.location.href,
              version: CONFIG.APP_VERSION,
            };

            console[level](`[AuthSuccess] ${message}`, logData);

            // In production, send to monitoring service
            // this._sendToMonitoring(logData);
          },

          info: function (msg, data) {
            this._log("log", msg, data);
          },
          warn: function (msg, data) {
            this._log("warn", msg, data);
          },
          error: function (msg, data) {
            this._log("error", msg, data);
          },
        };

        // Authentication state manager
        const AuthManager = {
          saveAuthState: function () {
            const authState = {
              isAuthenticated: true,
              timestamp: Date.now(),
              expiresAt: Date.now() + CONFIG.SESSION_TIMEOUT,
              version: CONFIG.APP_VERSION,
              sessionId: this._generateSessionId(),
              userAgent: navigator.userAgent,
            };

            return new Promise((resolve, reject) => {
              if (typeof chrome !== "undefined" && chrome.storage) {
                // Chrome extension environment
                chrome.storage.local.set(
                  { [CONFIG.STORAGE_KEY]: authState },
                  () => {
                    if (chrome.runtime.lastError) {
                      Logger.error(
                        "Chrome storage failed",
                        chrome.runtime.lastError
                      );
                      reject(chrome.runtime.lastError);
                    } else {
                      Logger.info("Auth state saved to Chrome storage");
                      resolve(authState);
                    }
                  }
                );
              } else {
                // Web environment - try multiple storage methods
                try {
                  localStorage.setItem(
                    CONFIG.STORAGE_KEY,
                    JSON.stringify(authState)
                  );
                  Logger.info("Auth state saved to localStorage");
                  resolve(authState);
                } catch (localStorageError) {
                  Logger.warn(
                    "localStorage failed, trying sessionStorage",
                    localStorageError
                  );
                  try {
                    sessionStorage.setItem(
                      CONFIG.STORAGE_KEY,
                      JSON.stringify(authState)
                    );
                    Logger.info("Auth state saved to sessionStorage");
                    resolve(authState);
                  } catch (sessionStorageError) {
                    Logger.error("All storage methods failed", {
                      localStorage: localStorageError,
                      sessionStorage: sessionStorageError,
                    });
                    reject(sessionStorageError);
                  }
                }
              }
            });
          },

          _generateSessionId: function () {
            return (
              "auth_" +
              Date.now().toString(36) +
              "_" +
              Math.random().toString(36).substring(2, 15)
            );
          },
        };

        // Main initialization
        async function initializeAuthSuccess() {
          Logger.info("Authentication success page initializing");

          try {
            // Focus the container for accessibility
            document.querySelector(".auth-container").focus();

            // Save authentication state
            await AuthManager.saveAuthState();
            Logger.info("Authentication process completed successfully");
          } catch (error) {
            Logger.error("Authentication process failed", error);
          }
        }

        // Event listeners
        window.addEventListener("beforeunload", () => {
          Logger.info("Window unloading");
        });

        window.addEventListener("error", (event) => {
          Logger.error("Unhandled error occurred", {
            message: event.message,
            filename: event.filename,
            lineno: event.lineno,
            colno: event.colno,
            error: event.error,
          });
        });

        // Initialize when DOM is ready
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", initializeAuthSuccess);
        } else {
          initializeAuthSuccess();
        }
      })();
    </script>
  </body>
</html>
